{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ruudd\\\\OneDrive - Office 365 Fontys\\\\SE31\\\\Big Idea - Stratego\\\\Project\\\\online-stratego-client\\\\src\\\\pages\\\\Lobby.js\";\nimport React, { Component } from 'react';\nimport SockJS from \"sockjs-client\";\nimport * as Stomp from \"@stomp/stompjs\";\nlet stompClient = null;\n\nclass Lobby extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lobbyId: 'QWER1234',\n      playerList: []\n    };\n    this.onMessageRecieved = this.onMessageRecieved.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n  }\n\n  componentDidMount() {\n    this.connect();\n  }\n\n  connect() {\n    let _this = this;\n\n    const socket = new SockJS('http://localhost:9000/ws');\n    stompClient = Stomp.Stomp.over(socket);\n    stompClient.connect({}, function (frame) {\n      console.log(frame.toString());\n      stompClient.subscribe('/topic/lobby', message => {\n        _this.onMessageRecieved(message);\n      });\n\n      _this.sendMessage('/app/lobby', {\n        id: 0,\n        lobbyId: _this.state.lobbyId,\n        username: 'ruudTest'\n      });\n    });\n  }\n\n  onMessageRecieved(msg) {\n    const message = JSON.parse(msg.body);\n    console.log(message, 'recieved');\n\n    if (message.operation == 'JOINED_LOBBY') {\n      this.setState({\n        lobbyId: message.lobbyId,\n        playerList: JSON.parse(message.content)\n      });\n    }\n  }\n\n  sendMessage(endPoint, message) {\n    stompClient.send(endPoint, {}, JSON.stringify(message));\n    console.log(message, 'SEND');\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Layout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Lobby;","map":{"version":3,"sources":["C:/Users/ruudd/OneDrive - Office 365 Fontys/SE31/Big Idea - Stratego/Project/online-stratego-client/src/pages/Lobby.js"],"names":["React","Component","SockJS","Stomp","stompClient","Lobby","constructor","props","state","lobbyId","playerList","onMessageRecieved","bind","sendMessage","componentDidMount","connect","_this","socket","over","frame","console","log","toString","subscribe","message","id","username","msg","JSON","parse","body","operation","setState","content","endPoint","send","stringify","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAO,KAAKC,KAAZ,MAAuB,gBAAvB;AAEA,IAAIC,WAAW,GAAG,IAAlB;;AAEA,MAAMC,KAAN,SAAoBJ,SAApB,CAA8B;AAE1BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAE,UADA;AAETC,MAAAA,UAAU,EAAE;AAFH,KAAb;AAIA,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAEDE,EAAAA,iBAAiB,GAAE;AACf,SAAKC,OAAL;AACH;;AAEDA,EAAAA,OAAO,GAAG;AACN,QAAIC,KAAK,GAAG,IAAZ;;AACA,UAAMC,MAAM,GAAG,IAAIf,MAAJ,CAAW,0BAAX,CAAf;AACAE,IAAAA,WAAW,GAAGD,KAAK,CAACA,KAAN,CAAYe,IAAZ,CAAiBD,MAAjB,CAAd;AACAb,IAAAA,WAAW,CAACW,OAAZ,CAAoB,EAApB,EAAwB,UAAUI,KAAV,EAAiB;AACrCC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,QAAN,EAAZ;AACAlB,MAAAA,WAAW,CAACmB,SAAZ,CAAsB,cAAtB,EAAuCC,OAAD,IAAa;AAC/CR,QAAAA,KAAK,CAACL,iBAAN,CAAwBa,OAAxB;AACH,OAFD;;AAGAR,MAAAA,KAAK,CAACH,WAAN,CAAkB,YAAlB,EAAgC;AAC5BY,QAAAA,EAAE,EAAE,CADwB;AAE5BhB,QAAAA,OAAO,EAAEO,KAAK,CAACR,KAAN,CAAYC,OAFO;AAG5BiB,QAAAA,QAAQ,EAAE;AAHkB,OAAhC;AAKH,KAVD;AAWH;;AAEDf,EAAAA,iBAAiB,CAACgB,GAAD,EAAK;AAClB,UAAMH,OAAO,GAAII,IAAI,CAACC,KAAL,CAAWF,GAAG,CAACG,IAAf,CAAjB;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAYG,OAAZ,EAAqB,UAArB;;AAEA,QAAIA,OAAO,CAACO,SAAR,IAAqB,cAAzB,EAAwC;AACpC,WAAKC,QAAL,CAAc;AACVvB,QAAAA,OAAO,EAAEe,OAAO,CAACf,OADP;AAEVC,QAAAA,UAAU,EAAEkB,IAAI,CAACC,KAAL,CAAWL,OAAO,CAACS,OAAnB;AAFF,OAAd;AAIH;AACJ;;AAEDpB,EAAAA,WAAW,CAAEqB,QAAF,EAAYV,OAAZ,EAAoB;AAC3BpB,IAAAA,WAAW,CAAC+B,IAAZ,CAAiBD,QAAjB,EAA2B,EAA3B,EAA+BN,IAAI,CAACQ,SAAL,CAAeZ,OAAf,CAA/B;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,OAAZ,EAAqB,MAArB;AACH;;AAEDa,EAAAA,MAAM,GAAG;AACL,WACI;AAAM,MAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAKH;;AAzDyB;;AA2D9B,eAAehC,KAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport SockJS from \"sockjs-client\";\r\nimport * as Stomp from \"@stomp/stompjs\";\r\n\r\nlet stompClient = null;\r\n\r\nclass Lobby extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            lobbyId: 'QWER1234',\r\n            playerList: []\r\n        }\r\n        this.onMessageRecieved = this.onMessageRecieved.bind(this);\r\n        this.sendMessage = this.sendMessage.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.connect();\r\n    }\r\n\r\n    connect() {\r\n        let _this = this;\r\n        const socket = new SockJS('http://localhost:9000/ws');\r\n        stompClient = Stomp.Stomp.over(socket);\r\n        stompClient.connect({}, function (frame) {\r\n            console.log(frame.toString());\r\n            stompClient.subscribe('/topic/lobby', (message) => {\r\n                _this.onMessageRecieved(message);\r\n            });\r\n            _this.sendMessage('/app/lobby', {\r\n                id: 0,\r\n                lobbyId: _this.state.lobbyId,\r\n                username: 'ruudTest'\r\n            });\r\n        });\r\n    }\r\n\r\n    onMessageRecieved(msg){\r\n        const message  = JSON.parse(msg.body);\r\n        console.log(message, 'recieved');\r\n\r\n        if (message.operation == 'JOINED_LOBBY'){\r\n            this.setState({\r\n                lobbyId: message.lobbyId,\r\n                playerList: JSON.parse(message.content)\r\n            });\r\n        }\r\n    }\r\n\r\n    sendMessage (endPoint, message){\r\n        stompClient.send(endPoint, {}, JSON.stringify(message));\r\n        console.log(message, 'SEND');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            < div className='Layout' >\r\n            </div >\r\n\r\n        )\r\n    }\r\n}\r\nexport default Lobby;"]},"metadata":{},"sourceType":"module"}