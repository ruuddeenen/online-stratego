{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ruudd\\\\OneDrive - Office 365 Fontys\\\\SE31\\\\Big Idea - Stratego\\\\Project\\\\online-stratego-client\\\\src\\\\pages\\\\Game.js\";\nimport React, { Component } from 'react';\nimport SockJS from \"sockjs-client\";\nimport * as Stomp from \"@stomp/stompjs\";\nconst height = 800,\n      width = 1000;\nlet stompClient = null;\n\nclass Game extends Component {\n  constructor(props) {\n    super(props);\n\n    this.connect = () => {\n      let _this = this;\n\n      const socket = new SockJS(websocketUrl);\n      stompClient = Stomp.Stomp.over(socket);\n      stompClient.connect({}, function (frame) {\n        console.log(frame.toString());\n        stompClient.subscribe('/topic/game', message => {\n          _this.handleMessage(message);\n        });\n\n        _this.sendMessage('/app/game', {\n          id: 0,\n          username: 'ruudTest'\n        });\n      });\n    };\n\n    this.sendMessage = (endPoint, message) => {\n      stompClient.send(endPoint, {}, JSON.stringify(message));\n      console.log(message, 'SEND');\n    };\n\n    this.toggle = () => {\n      this.sendMessage('/app/game', {\n        id: 0,\n        username: 'ruudTest'\n      });\n    };\n\n    this.state = {\n      mouseX: 0,\n      mouseY: 0,\n      ready: false,\n      board: [],\n      pawns: []\n    }; // Bindings\n\n    this.sendMessage = this.sendMessage.bind(this);\n    this.handleMessage = this.handleMessage.bind(this);\n    this.toggle = this.toggle.bind(this);\n  }\n\n  componentDidMount() {\n    this.connect();\n    this.drawBoard();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.state.board !== prevState.board) {\n      this.drawBoard();\n    }\n\n    if (this.state.pawns !== prevState.pawns) {\n      this.drawPawns();\n    }\n\n    console.log(this.state);\n  }\n\n  drawBoard() {\n    console.log('drawing board');\n    const canvas = document.getElementById('canvasBoard');\n    const context = canvas.getContext('2d');\n    const board = this.state.board;\n    const size = board.length;\n\n    for (var y = 0; y < size; y++) {\n      const field = board[y];\n\n      for (var x = 0; x < size; x++) {\n        if (field[x] === true) {\n          context.fillStyle = 'green';\n        } else if (field[x] === false) {\n          context.fillStyle = 'blue';\n        }\n\n        context.fillRect(width / size * x, height / size * y, width / size - 1, height / size - 1);\n      }\n    }\n  }\n\n  drawPawns() {\n    console.log('draw pawns');\n  }\n\n  handleMessage(message) {\n    const obj = JSON.parse(message.body);\n    this.setState({\n      board: obj.field\n    });\n    console.log(obj, 'OUTPUT');\n  }\n\n  handleMouseClick(e) {\n    let x = e.nativeEvent.layerX;\n    let y = e.nativeEvent.layerY;\n    x = Math.floor(x / 100);\n    y = Math.floor(y / 80);\n    this.setState({\n      mouseX: x,\n      mouseY: y\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"Layout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      style: {\n        paddingBottom: '3rem',\n        fontSize: '40px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"Online Stratego\"), React.createElement(\"div\", {\n      className: \"row\",\n      id: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      id: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"canvasWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      id: \"canvasBoard\",\n      width: width,\n      height: height,\n      onMouseDown: this.handleMouseClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"canvasWrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      id: \"canvasPawns\",\n      width: width,\n      height: height,\n      onMouseDown: this.handleMouseClick.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"row\",\n      id: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"toggle\"));\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["C:/Users/ruudd/OneDrive - Office 365 Fontys/SE31/Big Idea - Stratego/Project/online-stratego-client/src/pages/Game.js"],"names":["React","Component","SockJS","Stomp","height","width","stompClient","Game","constructor","props","connect","_this","socket","websocketUrl","over","frame","console","log","toString","subscribe","message","handleMessage","sendMessage","id","username","endPoint","send","JSON","stringify","toggle","state","mouseX","mouseY","ready","board","pawns","bind","componentDidMount","drawBoard","componentDidUpdate","prevProps","prevState","snapshot","drawPawns","canvas","document","getElementById","context","getContext","size","length","y","field","x","fillStyle","fillRect","obj","parse","body","setState","handleMouseClick","e","nativeEvent","layerX","layerY","Math","floor","render","paddingBottom","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport SockJS from \"sockjs-client\";\r\nimport * as Stomp from \"@stomp/stompjs\";\r\n\r\nconst height = 800, width = 1000;\r\nlet stompClient = null;\r\n\r\nclass Game extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            mouseX: 0,\r\n            mouseY: 0,\r\n            ready: false,\r\n            board: [],\r\n            pawns: []\r\n        };\r\n\r\n        // Bindings\r\n        this.sendMessage = this.sendMessage.bind(this);\r\n        this.handleMessage = this.handleMessage.bind(this);\r\n        this.toggle = this.toggle.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.connect();\r\n        this.drawBoard();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.state.board !== prevState.board) {\r\n            this.drawBoard();\r\n        }\r\n        if (this.state.pawns !== prevState.pawns) {\r\n            this.drawPawns();\r\n        }\r\n        console.log(this.state);\r\n    }\r\n\r\n    connect = () => {\r\n        let _this = this;\r\n        const socket = new SockJS(websocketUrl);\r\n        stompClient = Stomp.Stomp.over(socket);\r\n        stompClient.connect({}, function (frame) {\r\n            console.log(frame.toString());\r\n            stompClient.subscribe('/topic/game', (message) => {\r\n                _this.handleMessage(message);\r\n            });\r\n            _this.sendMessage('/app/game', { id: 0, username: 'ruudTest' });\r\n        });\r\n    }\r\n\r\n\r\n    drawBoard() {\r\n        console.log('drawing board');\r\n        const canvas = document.getElementById('canvasBoard');\r\n        const context = canvas.getContext('2d');\r\n\r\n        const board = this.state.board;\r\n        const size = board.length;\r\n            for (var y = 0; y < size; y++) {\r\n                const field = board[y];\r\n                for (var x = 0; x < size; x++) {\r\n                    if (field[x] === true) {\r\n                        context.fillStyle = 'green';\r\n                    } else if (field[x] === false) {\r\n                        context.fillStyle = 'blue';\r\n                    }\r\n                    context.fillRect((width / size) * x, (height / size) * y, width / size - 1, height / size - 1);\r\n                }\r\n            }\r\n\r\n    }\r\n\r\n    drawPawns() {\r\n        console.log('draw pawns');\r\n    }\r\n\r\n    handleMessage(message) {\r\n        const obj = JSON.parse(message.body);\r\n        this.setState({\r\n            board: obj.field\r\n        });\r\n        console.log(obj, 'OUTPUT');\r\n    }\r\n\r\n    sendMessage = (endPoint, message) => {\r\n        stompClient.send(endPoint, {}, JSON.stringify(message));\r\n        console.log(message, 'SEND');\r\n    }\r\n\r\n    toggle = () => {\r\n        this.sendMessage('/app/game', { id: 0, username: 'ruudTest' });\r\n    }\r\n\r\n    handleMouseClick(e) {\r\n        let x = e.nativeEvent.layerX;\r\n        let y = e.nativeEvent.layerY;\r\n        x = Math.floor(x / 100);\r\n        y = Math.floor(y / 80);\r\n\r\n        this.setState({\r\n            mouseX: x,\r\n            mouseY: y\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='Layout'>\r\n                <header style={{ paddingBottom: '3rem', fontSize: '40px' }}>\r\n                    Online Stratego\r\n                </header>\r\n\r\n                <div className='row' id='left'>\r\n\r\n                </div>\r\n                <div className='row' id='center'>\r\n                    <div className='grid'>\r\n                        <div className='canvasWrapper'>\r\n                            <canvas id='canvasBoard' width={width} height={height} onMouseDown={this.handleMouseClick.bind(this)} />\r\n                        </div>\r\n                        <div className='canvasWrapper'>\r\n                            <canvas id='canvasPawns' width={width} height={height} onMouseDown={this.handleMouseClick.bind(this)} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='row' id='right'>\r\n                </div>\r\n\r\n\r\n                <button onClick={this.toggle}>\r\n                    toggle\r\n                </button>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Game;\r\n"]},"metadata":{},"sourceType":"module"}